{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,8EAQA,MAAMC,EAAOC,SAASC,eAAe,oBAC/BC,EAAYF,SAASC,eAAe,aAE1C,IAAIE,GAAU,EAAAC,EAAAC,cAEdN,EAAKO,iBAAiB,UAEtB,SAAsBC,GACpBA,EAAMC,iBAEN,MAAMC,EAAWV,EAAKW,QAAQC,UACxBC,EAASb,EAAKW,QAAQG,QAE5B,GAAIJ,EAAU,CACZ,MACEK,UAAUC,cAAEA,EAAaC,YAAEA,EAAWC,cAAEA,IACtCV,EAAMW,cAEV,IAAIC,EAAU,CACZC,IAAI,EAAAvB,EAAAwB,QAAO,GACXC,MAAON,EAAYO,MACnBC,KAAMT,EAAcQ,MACpBE,gBAAiBR,EAAcM,OAG7BG,EAAgBvB,EAAQwB,MAAKC,GAAMA,EAAGR,KAAOX,IACjD,GAAIiB,EAAe,CACjBA,EAAcG,MAAMC,KAAKX,IAEzB,EAAAf,EAAA2B,aAAY5B,GAEZ,IAAI6B,EAAO,IAAI,EAAAC,EAAAC,SAAWf,GAC1BjB,EAAUiC,mBAAmB,YAAaH,EAAKI,kBAE/C,EAAAC,EAAAC,gBACAvC,EAAKwC,O,EAIT,GAAI3B,EAAQ,CACV,IAAI4B,GAAS,EAAAC,EAAAP,SAAqBtB,GAC9BoB,GAAO,EAAAU,EAAAR,SAAetB,GAC1B,MACEE,UAAUC,cAAEA,EAAaC,YAAEA,EAAWC,cAAEA,IACtCV,EAAMW,cACV,IAAIyB,EAAYH,EAAOX,MAAMe,QAAQZ,GAEjCa,EAAa,CACfzB,GAAIR,EACJU,MAAON,EAAYO,MACnBC,KAAMT,EAAcQ,MACpBE,gBAAiBR,EAAcM,OAGjCiB,EAAOX,MAAMiB,OAAOH,EAAW,EAAGE,GAElC3C,EAAU6C,UAAY,GACtBP,EAAOX,MAAMmB,SAAQpB,IACnB,IAAIC,EAAQ,IAAI,EAAAI,EAAAC,SAAWN,GAC3B1B,EAAUiC,mBAAmB,YAAaN,EAAMO,gBAAgB,KAElE,EAAAa,EAAAf,SAAYW,GACZ9C,EAAKwC,O","sources":["src/js/athors/bookCreation.js"],"sourcesContent":["import { nanoid } from 'nanoid';\nimport infoAuthor from '../halpers/infoAuthor';\nimport searchAuthorByBookId from '../halpers/searchAuthorByBookId';\nimport searchBookById from '../halpers/searchBookById';\nimport fillingForm from '../halpers/fillingForm';\nimport { CreateObject } from './authorsRender';\nimport { getLibrary, postLibrary } from '../api/workWithLocalStorage';\n\nconst form = document.getElementById('bookCreationForm');\nconst infoBooks = document.getElementById('infoBooks');\n\nlet library = getLibrary();\n\nform.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n\n  const authorId = form.dataset.id_author;\n  const bookId = form.dataset.id_book;\n\n  if (authorId) {\n    const {\n      elements: { bookNameInput, selectGanre, numberOfPages },\n    } = event.currentTarget;\n\n    let newBook = {\n      id: nanoid(5),\n      ganre: selectGanre.value,\n      name: bookNameInput.value,\n      number_of_pages: numberOfPages.value,\n    };\n\n    let libUpdateItem = library.find(it => it.id === authorId);\n    if (libUpdateItem) {\n      libUpdateItem.books.push(newBook);\n\n      postLibrary(library);\n\n      let book = new infoAuthor(newBook);\n      infoBooks.insertAdjacentHTML('beforeend', book.getAuthorBook());\n\n      CreateObject();\n      form.reset();\n    }\n  }\n\n  if (bookId) {\n    let author = searchAuthorByBookId(bookId);\n    let book = searchBookById(bookId);\n    const {\n      elements: { bookNameInput, selectGanre, numberOfPages },\n    } = event.currentTarget;\n    let indexBook = author.books.indexOf(book);\n\n    let updateBook = {\n      id: bookId,\n      ganre: selectGanre.value,\n      name: bookNameInput.value,\n      number_of_pages: numberOfPages.value,\n    };\n\n    author.books.splice(indexBook, 1, updateBook);\n\n    infoBooks.innerHTML = '';\n    author.books.forEach(it => {\n      let books = new infoAuthor(it);\n      infoBooks.insertAdjacentHTML('beforeend', books.getAuthorBook());\n    });\n    fillingForm(updateBook);\n    form.reset();\n  }\n}\n"],"names":["$hN3me","parcelRequire","$45415823a3501bc4$var$form","document","getElementById","$45415823a3501bc4$var$infoBooks","$45415823a3501bc4$var$library","$8JP4i","getLibrary","addEventListener","event","preventDefault","authorId","dataset","id_author","bookId","id_book","elements","bookNameInput","selectGanre","numberOfPages","currentTarget","newBook","id","nanoid","ganre","value","name","number_of_pages","libUpdateItem","find","it","books","push","postLibrary","book","$cLNRI","default","insertAdjacentHTML","getAuthorBook","$2sTjB","CreateObject","reset","author","$9jqFG","$44GL0","indexBook","indexOf","updateBook","splice","innerHTML","forEach","$2te9C"],"version":3,"file":"index.47a45abf.js.map"}