{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,8EAQMC,EAAOC,SAASC,eAAe,oBAC/BC,EAAYF,SAASC,eAAe,aAEtCE,GAAU,EAAAC,EAAAC,cAEdN,EAAKO,iBAAiB,UAEtB,SAAsBC,GACpBA,EAAMC,iBAEN,IAAMC,EAAWV,EAAKW,QAAQC,UACxBC,EAASb,EAAKW,QAAQG,QAE5B,GAAIJ,EAAU,CACZ,IAEuBK,EAAnBP,EAAMQ,cADRC,SAAYC,EAAaH,EAAbG,cAAeC,EAAWJ,EAAXI,YAAaC,EAAaL,EAAbK,cAGtCC,EAAU,CACZC,IAAI,EAAAxB,EAAAyB,QAAO,GACXC,MAAOL,EAAYM,MACnBC,KAAMR,EAAcO,MACpBE,gBAAiBP,EAAcK,OAG7BG,EAAgBxB,EAAQyB,MAAK,SAAAC,G,OAAMA,EAAGR,KAAOZ,C,IACjD,GAAIkB,EAAe,CACjBA,EAAcG,MAAMC,KAAKX,IAEzB,EAAAhB,EAAA4B,aAAY7B,GAEZ,IAAI8B,EAAO,IAAI,EAAAC,EAAAC,SAAWf,GAC1BlB,EAAUkC,mBAAmB,YAAaH,EAAKI,kBAE/C,EAAAC,EAAAC,gBACAxC,EAAKyC,O,EAIT,GAAI5B,EAAQ,CACV,IAAI6B,GAAS,EAAAC,EAAAP,SAAqBvB,GAC9B+B,GAAO,EAAAC,EAAAT,SAAevB,GAGHiC,EAAnBtC,EAAMQ,cADRC,SAAY8B,EAAaD,EAAb5B,cAAe8B,EAAWF,EAAX3B,YAAa8B,EAAaH,EAAb1B,cAEtC8B,EAAYR,EAAOX,MAAMoB,QAAQP,GAEjCQ,EAAa,CACf9B,GAAIT,EACJW,MAAOwB,EAAYvB,MACnBC,KAAMqB,EAActB,MACpBE,gBAAiBsB,EAAcxB,OAGjCiB,EAAOX,MAAMsB,OAAOH,EAAW,EAAGE,GAElCjD,EAAUmD,UAAY,GACtBZ,EAAOX,MAAMwB,SAAQ,SAAAzB,GACnB,IAAIC,EAAQ,IAAI,EAAAI,EAAAC,SAAWN,GAC3B3B,EAAUkC,mBAAmB,YAAaN,EAAMO,gB,KAElD,EAAAkB,EAAApB,SAAYgB,GACZpD,EAAKyC,O","sources":["src/js/athors/bookCreation.js"],"sourcesContent":["import { nanoid } from 'nanoid';\nimport infoAuthor from '../halpers/infoAuthor';\nimport searchAuthorByBookId from '../halpers/searchAuthorByBookId';\nimport searchBookById from '../halpers/searchBookById';\nimport fillingForm from '../halpers/fillingForm';\nimport { CreateObject } from './authorsRender';\nimport { getLibrary, postLibrary } from '../api/workWithLocalStorage';\n\nconst form = document.getElementById('bookCreationForm');\nconst infoBooks = document.getElementById('infoBooks');\n\nlet library = getLibrary();\n\nform.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n\n  const authorId = form.dataset.id_author;\n  const bookId = form.dataset.id_book;\n\n  if (authorId) {\n    const {\n      elements: { bookNameInput, selectGanre, numberOfPages },\n    } = event.currentTarget;\n\n    let newBook = {\n      id: nanoid(5),\n      ganre: selectGanre.value,\n      name: bookNameInput.value,\n      number_of_pages: numberOfPages.value,\n    };\n\n    let libUpdateItem = library.find(it => it.id === authorId);\n    if (libUpdateItem) {\n      libUpdateItem.books.push(newBook);\n\n      postLibrary(library);\n\n      let book = new infoAuthor(newBook);\n      infoBooks.insertAdjacentHTML('beforeend', book.getAuthorBook());\n\n      CreateObject();\n      form.reset();\n    }\n  }\n\n  if (bookId) {\n    let author = searchAuthorByBookId(bookId);\n    let book = searchBookById(bookId);\n    const {\n      elements: { bookNameInput, selectGanre, numberOfPages },\n    } = event.currentTarget;\n    let indexBook = author.books.indexOf(book);\n\n    let updateBook = {\n      id: bookId,\n      ganre: selectGanre.value,\n      name: bookNameInput.value,\n      number_of_pages: numberOfPages.value,\n    };\n\n    author.books.splice(indexBook, 1, updateBook);\n\n    infoBooks.innerHTML = '';\n    author.books.forEach(it => {\n      let books = new infoAuthor(it);\n      infoBooks.insertAdjacentHTML('beforeend', books.getAuthorBook());\n    });\n    fillingForm(updateBook);\n    form.reset();\n  }\n}\n"],"names":["$b1xHZ","parcelRequire","$1e7e76ec74a683c3$var$form","document","getElementById","$1e7e76ec74a683c3$var$infoBooks","$1e7e76ec74a683c3$var$library","$3sd2r","getLibrary","addEventListener","event","preventDefault","authorId","dataset","id_author","bookId","id_book","_elements","currentTarget","elements","bookNameInput","selectGanre","numberOfPages","newBook","id","nanoid","ganre","value","name","number_of_pages","libUpdateItem","find","it","books","push","postLibrary","book","$6TCHH","default","insertAdjacentHTML","getAuthorBook","$1OouM","CreateObject","reset","author","$1rtSa","book1","$kR1yb","_elements1","bookNameInput1","selectGanre1","numberOfPages1","indexBook","indexOf","updateBook","splice","innerHTML","forEach","$lGJZq"],"version":3,"file":"index.e55da6e4.js.map"}